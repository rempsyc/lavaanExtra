<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="lavaanExtra">
<title>Example lavaan models • lavaanExtra</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example lavaan models">
<meta property="og:description" content="lavaanExtra">
<meta property="og:image" content="https://lavaanExtra.remi-theriault.com/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-274QZTFL23"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-274QZTFL23');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light" data-bs-theme="default"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lavaanExtra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa fa fa-home"></span>
     
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/regression.html">Regressions</a>
    <a class="dropdown-item" href="../articles/fullworkflow.html">Full CFA/SEM workflow</a>
    <a class="dropdown-item" href="../articles/example.html">Example lavaan models</a>
    <a class="dropdown-item" href="../articles/indirect.html">Automatic indirect effects</a>
    <a class="dropdown-item" href="../articles/write_lavaan.html">Using `write_lavaan`</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../TODOS.html">To-dos</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://doi.org/10.21105/joss.05701">JOSS Paper</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://rempsyc.remi-theriault.com/" aria-label="rempsyc">rempsyc</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/rempsyc" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rempsyc/lavaanExtra" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sponsors/rempsyc" aria-label="Donate">
    <span class="fa fa-coffee"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Example lavaan models</h1>
                        <h4 data-toc-skip class="author">Rémi
Thériault</h4>
            
            <h4 data-toc-skip class="date">August 24, 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rempsyc/lavaanExtra/blob/HEAD/vignettes/example.Rmd" class="external-link"><code>vignettes/example.Rmd</code></a></small>
      <div class="d-none name"><code>example.Rmd</code></div>
    </div>

    
    
<p>This article attempts to reproduce several different possible
<code>lavaan</code> models. We start with the source itself: The lavaan
project at <a href="https://lavaan.ugent.be" class="external-link uri">https://lavaan.ugent.be</a>. Let’s start by loading both
packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaanExtra.remi-theriault.com">lavaanExtra</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="example-1-model-syntax-1">Example 1 (Model syntax 1):<a class="anchor" aria-label="anchor" href="#example-1-model-syntax-1"></a>
</h2>
<p>Source: <a href="https://lavaan.ugent.be/tutorial/syntax1.html" class="external-link uri">https://lavaan.ugent.be/tutorial/syntax1.html</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span> <span class="op">&lt;-</span> <span class="st">" # regressions</span></span>
<span><span class="st">             y1 + y2 ~ f1 + f2 + x1 + x2</span></span>
<span><span class="st">                  f1 ~ f2 + f3</span></span>
<span><span class="st">                  f2 ~ f3 + x1 + x2</span></span>
<span><span class="st"></span></span>
<span><span class="st">             # latent variable definitions</span></span>
<span><span class="st">               f1 =~ y1 + y2 + y3</span></span>
<span><span class="st">               f2 =~ y4 + y5 + y6</span></span>
<span><span class="st">               f3 =~ y7 + y8 + y9 + y10</span></span>
<span><span class="st"></span></span>
<span><span class="st">             # variances and covariances</span></span>
<span><span class="st">               y1 ~~ y1</span></span>
<span><span class="st">               y1 ~~ y2</span></span>
<span><span class="st">               f1 ~~ f2</span></span>
<span><span class="st"></span></span>
<span><span class="st">             # intercepts</span></span>
<span><span class="st">               y1 ~ 1</span></span>
<span><span class="st">               f1 ~ 1</span></span>
<span><span class="st">           "</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  y1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f1"</span>, <span class="st">"f2"</span>, <span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,</span>
<span>  y2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f1"</span>, <span class="st">"f2"</span>, <span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,</span>
<span>  f1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f2"</span>, <span class="st">"f3"</span><span class="op">)</span>,</span>
<span>  f2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f3"</span>, <span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  f1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  f2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  f3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  y1 <span class="op">=</span> <span class="st">"y1"</span>,</span>
<span>  y1 <span class="op">=</span> <span class="st">"y2"</span>,</span>
<span>  f1 <span class="op">=</span> <span class="st">"f2"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"f1"</span><span class="op">)</span></span>
<span><span class="va">myModel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span></span>
<span>  regression <span class="op">=</span> <span class="va">reg</span>,</span>
<span>  latent <span class="op">=</span> <span class="va">lat</span>,</span>
<span>  covariance <span class="op">=</span> <span class="va">cov</span>,</span>
<span>  intercept <span class="op">=</span> <span class="va">int</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">myModel</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## f1 =~ y1 + y2 + y3</span></span>
<span><span class="co">## f2 =~ y4 + y5 + y6</span></span>
<span><span class="co">## f3 =~ y7 + y8 + y9 + y10</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y1 ~ f1 + f2 + x1 + x2</span></span>
<span><span class="co">## y2 ~ f1 + f2 + x1 + x2</span></span>
<span><span class="co">## f1 ~ f2 + f3</span></span>
<span><span class="co">## f2 ~ f3 + x1 + x2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Covariances-----------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y1 ~~ y1</span></span>
<span><span class="co">## y1 ~~ y2</span></span>
<span><span class="co">## f1 ~~ f2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Intercepts------------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y1 ~ 1</span></span>
<span><span class="co">## f1 ~ 1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-2-a-cfa-example">Example 2 (A CFA example):<a class="anchor" aria-label="anchor" href="#example-2-a-cfa-example"></a>
</h2>
<p>Source: <a href="https://lavaan.ugent.be/tutorial/cfa.html" class="external-link uri">https://lavaan.ugent.be/tutorial/cfa.html</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HS.model</span> <span class="op">&lt;-</span> <span class="st">" visual  =~ x1 + x2 + x3</span></span>
<span><span class="st">              textual =~ x4 + x5 + x6</span></span>
<span><span class="st">              speed   =~ x7 + x8 + x9 "</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">myModel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>latent <span class="op">=</span> <span class="va">lat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">myModel</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## visual =~ x1 + x2 + x3</span></span>
<span><span class="co">## textual =~ x4 + x5 + x6</span></span>
<span><span class="co">## speed =~ x7 + x8 + x9</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-3-a-sem-example">Example 3 (A SEM example):<a class="anchor" aria-label="anchor" href="#example-3-a-sem-example"></a>
</h2>
<p>Source: <a href="https://lavaan.ugent.be/tutorial/sem.html" class="external-link uri">https://lavaan.ugent.be/tutorial/sem.html</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  # measurement model</span></span>
<span><span class="st">    ind60 =~ x1 + x2 + x3</span></span>
<span><span class="st">    dem60 =~ y1 + y2 + y3 + y4</span></span>
<span><span class="st">    dem65 =~ y5 + y6 + y7 + y8</span></span>
<span><span class="st">  # regressions</span></span>
<span><span class="st">    dem60 ~ ind60</span></span>
<span><span class="st">    dem65 ~ ind60 + dem60</span></span>
<span><span class="st">  # residual correlations</span></span>
<span><span class="st">    y1 ~~ y5</span></span>
<span><span class="st">    y2 ~~ y4 + y6</span></span>
<span><span class="st">    y3 ~~ y7</span></span>
<span><span class="st">    y4 ~~ y8</span></span>
<span><span class="st">    y6 ~~ y8</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  ind60 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  dem60 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>  dem65 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  dem60 <span class="op">=</span> <span class="st">"ind60"</span>,</span>
<span>  dem65 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ind60"</span>, <span class="st">"dem60"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  y1 <span class="op">=</span> <span class="st">"y5"</span>,</span>
<span>  y2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y4"</span>, <span class="st">"y6"</span><span class="op">)</span>,</span>
<span>  y3 <span class="op">=</span> <span class="st">"y7"</span>,</span>
<span>  y4 <span class="op">=</span> <span class="st">"y8"</span>,</span>
<span>  y6 <span class="op">=</span> <span class="st">"y8"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span></span>
<span>  latent <span class="op">=</span> <span class="va">lat</span>,</span>
<span>  regression <span class="op">=</span> <span class="va">reg</span>,</span>
<span>  covariance <span class="op">=</span> <span class="va">cov</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ind60 =~ x1 + x2 + x3</span></span>
<span><span class="co">## dem60 =~ y1 + y2 + y3 + y4</span></span>
<span><span class="co">## dem65 =~ y5 + y6 + y7 + y8</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## dem60 ~ ind60</span></span>
<span><span class="co">## dem65 ~ ind60 + dem60</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Covariances-----------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y1 ~~ y5</span></span>
<span><span class="co">## y2 ~~ y4 + y6</span></span>
<span><span class="co">## y3 ~~ y7</span></span>
<span><span class="co">## y4 ~~ y8</span></span>
<span><span class="co">## y6 ~~ y8</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-4-model-syntax-2">Example 4 (Model syntax 2):<a class="anchor" aria-label="anchor" href="#example-4-model-syntax-2"></a>
</h2>
<p>Source: <a href="https://lavaan.ugent.be/tutorial/syntax2.html" class="external-link uri">https://lavaan.ugent.be/tutorial/syntax2.html</a></p>
<div class="section level4">
<h4 id="example-4-1">Example 4.1<a class="anchor" aria-label="anchor" href="#example-4-1"></a>
</h4>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st"># three-factor model</span></span>
<span><span class="st">  visual =~ x1 + x2 + x3</span></span>
<span><span class="st">  textual =~ x4 + x5 + x6</span></span>
<span><span class="st">  speed   =~ NA*x7 + x8 + x9</span></span>
<span><span class="st"># orthogonal factors</span></span>
<span><span class="st">  visual ~~ 0*speed</span></span>
<span><span class="st">  textual ~~ 0*speed</span></span>
<span><span class="st"># fix variance of speed factor</span></span>
<span><span class="st">  speed ~~ 1*speed</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NA*x7"</span>, <span class="st">"x8"</span>, <span class="st">"x9"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  visual <span class="op">=</span> <span class="st">"0*speed"</span>,</span>
<span>  textual <span class="op">=</span> <span class="st">"0*speed"</span>,</span>
<span>  speed <span class="op">=</span> <span class="st">"1*speed"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>latent <span class="op">=</span> <span class="va">lat</span>, covariance <span class="op">=</span> <span class="va">cov</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## visual =~ x1 + x2 + x3</span></span>
<span><span class="co">## textual =~ x4 + x5 + x6</span></span>
<span><span class="co">## speed =~ NA*x7 + x8 + x9</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Covariances-----------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## visual ~~ 0*speed</span></span>
<span><span class="co">## textual ~~ 0*speed</span></span>
<span><span class="co">## speed ~~ 1*speed</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-4-2">Example 4.2<a class="anchor" aria-label="anchor" href="#example-4-2"></a>
</h4>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">visual  =~ x1 + start(0.8)*x2 + start(1.2)*x3</span></span>
<span><span class="st">textual =~ x4 + start(0.5)*x5 + start(1.0)*x6</span></span>
<span><span class="st">speed   =~ x7 + start(0.7)*x8 + start(1.8)*x9</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"start(0.8)*x2"</span>, <span class="st">"start(1.2)*x3"</span><span class="op">)</span>,</span>
<span>  textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x4"</span>, <span class="st">"start(0.5)*x5"</span>, <span class="st">"start(1.0)*x6"</span><span class="op">)</span>,</span>
<span>  speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x7"</span>, <span class="st">"start(0.7)*x8"</span>, <span class="st">"start(1.8)*x9"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>latent <span class="op">=</span> <span class="va">lat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## visual =~ x1 + start(0.8)*x2 + start(1.2)*x3</span></span>
<span><span class="co">## textual =~ x4 + start(0.5)*x5 + start(1.0)*x6</span></span>
<span><span class="co">## speed =~ x7 + start(0.7)*x8 + start(1.8)*x9</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-4-3">Example 4.3<a class="anchor" aria-label="anchor" href="#example-4-3"></a>
</h4>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">f =~ y1 + y2 + myLabel*y3 + start(0.5)*y3 + y4</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"myLabel*y3"</span>, <span class="st">"start(0.5)*y3"</span>, <span class="st">"y4"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>latent <span class="op">=</span> <span class="va">lat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## f =~ y1 + y2 + myLabel*y3 + start(0.5)*y3 + y4</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-4-4">Example 4.4<a class="anchor" aria-label="anchor" href="#example-4-4"></a>
</h4>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">visual  =~ x1 + v2*x2 + v2*x3</span></span>
<span><span class="st">textual =~ x4 + x5 + x6</span></span>
<span><span class="st">speed   =~ x7 + x8 + x9</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"v2*x2"</span>, <span class="st">"v2*x3"</span><span class="op">)</span>,</span>
<span>  textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>latent <span class="op">=</span> <span class="va">lat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## visual =~ x1 + v2*x2 + v2*x3</span></span>
<span><span class="co">## textual =~ x4 + x5 + x6</span></span>
<span><span class="co">## speed =~ x7 + x8 + x9</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-4-5">Example 4.5<a class="anchor" aria-label="anchor" href="#example-4-5"></a>
</h4>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">visual  =~ x1 + x2 + equal("visual=~x2")*x3</span></span>
<span><span class="st">textual =~ x4 + x5 + x6</span></span>
<span><span class="st">speed   =~ x7 + x8 + x9</span></span>
<span><span class="st">'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">model</span>, data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## lavaan 0.6-18 ended normally after 36 iterations</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Estimator                                         ML</span></span>
<span><span class="co">##   Optimization method                           NLMINB</span></span>
<span><span class="co">##   Number of model parameters                        21</span></span>
<span><span class="co">##   Number of equality constraints                     1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Number of observations                           301</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model Test User Model:</span></span>
<span><span class="co">##                                                       </span></span>
<span><span class="co">##   Test statistic                                87.971</span></span>
<span><span class="co">##   Degrees of freedom                                25</span></span>
<span><span class="co">##   P-value (Chi-square)                           0.000</span></span></code></pre>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"equal('visual=~x2')*x3"</span><span class="op">)</span>,</span>
<span>  textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>latent <span class="op">=</span> <span class="va">lat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## visual =~ x1 + x2 + equal('visual=~x2')*x3</span></span>
<span><span class="co">## textual =~ x4 + x5 + x6</span></span>
<span><span class="co">## speed =~ x7 + x8 + x9</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">model</span>, data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## lavaan 0.6-18 ended normally after 36 iterations</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Estimator                                         ML</span></span>
<span><span class="co">##   Optimization method                           NLMINB</span></span>
<span><span class="co">##   Number of model parameters                        21</span></span>
<span><span class="co">##   Number of equality constraints                     1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Number of observations                           301</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model Test User Model:</span></span>
<span><span class="co">##                                                       </span></span>
<span><span class="co">##   Test statistic                                87.971</span></span>
<span><span class="co">##   Degrees of freedom                                25</span></span>
<span><span class="co">##   P-value (Chi-square)                           0.000</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-4-6">Example 4.6<a class="anchor" aria-label="anchor" href="#example-4-6"></a>
</h4>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model.constr</span> <span class="op">&lt;-</span> <span class="st">" # model with labeled parameters</span></span>
<span><span class="st">                    y ~ b1*x1 + b2*x2 + b3*x3</span></span>
<span><span class="st">                  # constraints</span></span>
<span><span class="st">                    b1 == (b2 + b3)^2</span></span>
<span><span class="st">                    b1 &gt; exp(b2 + b3) "</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b1*x1"</span>, <span class="st">"b2*x2"</span>, <span class="st">"b3*x3"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cstr1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>b1 <span class="op">=</span> <span class="st">"(b2 + b3)^2"</span><span class="op">)</span></span>
<span><span class="va">cstr2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>b1 <span class="op">=</span> <span class="st">"exp(b2 + b3)"</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span></span>
<span>  regression <span class="op">=</span> <span class="va">reg</span>, constraint.equal <span class="op">=</span> <span class="va">cstr1</span>,</span>
<span>  constraint.larger <span class="op">=</span> <span class="va">cstr2</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y ~ b1*x1 + b2*x2 + b3*x3</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----------------Constraints------------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## b1 == (b2 + b3)^2</span></span>
<span><span class="co">## b1 &gt; exp(b2 + b3)</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="example-5-mediation">Example 5 (Mediation)<a class="anchor" aria-label="anchor" href="#example-5-mediation"></a>
</h2>
<p>Source: <a href="https://lavaan.ugent.be/tutorial/mediation.html" class="external-link uri">https://lavaan.ugent.be/tutorial/mediation.html</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">" # direct effect</span></span>
<span><span class="st">             Y ~ c*X</span></span>
<span><span class="st">           # mediator</span></span>
<span><span class="st">             M ~ a*X</span></span>
<span><span class="st">             Y ~ b*M</span></span>
<span><span class="st">           # indirect effect (a*b)</span></span>
<span><span class="st">             ab := a*b</span></span>
<span><span class="st">           # total effect</span></span>
<span><span class="st">             total := c + (a*b)</span></span>
<span><span class="st">         "</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mediation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  Y <span class="op">=</span> <span class="st">"c*X"</span>,</span>
<span>  M <span class="op">=</span> <span class="st">"a*X"</span>,</span>
<span>  Y <span class="op">=</span> <span class="st">"b*M"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">indirect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  ab <span class="op">=</span> <span class="st">"a*b"</span>,</span>
<span>  total <span class="op">=</span> <span class="st">"c + (a*b)"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>mediation <span class="op">=</span> <span class="va">mediation</span>, indirect <span class="op">=</span> <span class="va">indirect</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----------Mediations (named paths)-----------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Y ~ c*X</span></span>
<span><span class="co">## M ~ a*X</span></span>
<span><span class="co">## Y ~ b*M</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [--------Mediations (indirect effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ab := a*b</span></span>
<span><span class="co">## total := c + (a*b)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-6-multilevel-sem">Example 6 (Multilevel SEM)<a class="anchor" aria-label="anchor" href="#example-6-multilevel-sem"></a>
</h2>
<p>Source: <a href="https://lavaan.ugent.be/tutorial/multilevel.html" class="external-link uri">https://lavaan.ugent.be/tutorial/multilevel.html</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    level: 1</span></span>
<span><span class="st">        fw =~ y1 + y2 + y3</span></span>
<span><span class="st">        fw ~ x1 + x2 + x3</span></span>
<span><span class="st">    level: 2</span></span>
<span><span class="st">        fb =~ y1 + y2 + y3</span></span>
<span><span class="st">        fb ~ w1 + w2</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cus</span> <span class="op">&lt;-</span></span>
<span>  <span class="st">"level: 1</span></span>
<span><span class="st">    fw =~ y1 + y2 + y3</span></span>
<span><span class="st">    fw ~ x1 + x2 + x3</span></span>
<span><span class="st">level: 2</span></span>
<span><span class="st">    fb =~ y1 + y2 + y3</span></span>
<span><span class="st">    fb ~ w1 + w2</span></span>
<span><span class="st">"</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>custom <span class="op">=</span> <span class="va">cus</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------Custom Specifications-------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## level: 1</span></span>
<span><span class="co">##     fw =~ y1 + y2 + y3</span></span>
<span><span class="co">##     fw ~ x1 + x2 + x3</span></span>
<span><span class="co">## level: 2</span></span>
<span><span class="co">##     fb =~ y1 + y2 + y3</span></span>
<span><span class="co">##     fb ~ w1 + w2</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-7-total-effects">Example 7 (total effects)<a class="anchor" aria-label="anchor" href="#example-7-total-effects"></a>
</h2>
<p>Source: <a href="https://methodenlehre.github.io/SGSCLM-R-course/cfa-and-sem-with-lavaan.html#structural-equation-modelling-sem" class="external-link uri">https://methodenlehre.github.io/SGSCLM-R-course/cfa-and-sem-with-lavaan.html#structural-equation-modelling-sem</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_mediation</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st"># Measurement model</span></span>
<span><span class="st">SUP_Parents =~ sup_parents_p1 + sup_parents_p2 + sup_parents_p3</span></span>
<span><span class="st">SUP_Friends =~ sup_friends_p1 + sup_friends_p2 + sup_friends_p3</span></span>
<span><span class="st">SE_Academic =~ se_acad_p1 + se_acad_p2 + se_acad_p3</span></span>
<span><span class="st">SE_Social =~ se_social_p1 + se_social_p2 + se_social_p3</span></span>
<span><span class="st">LS  =~ ls_p1 + ls_p2 + ls_p3</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Structural model</span></span>
<span><span class="st"># Regressions</span></span>
<span><span class="st">SE_Academic ~ b1*SUP_Parents + b3*SUP_Friends</span></span>
<span><span class="st">SE_Social ~ b2*SUP_Parents + b4*SUP_Friends</span></span>
<span><span class="st">LS ~ b5*SUP_Parents + b6*SUP_Friends + b7*SE_Academic + b8*SE_Social</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Residual covariances</span></span>
<span><span class="st">SE_Academic ~~ SE_Social</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Indirect effects</span></span>
<span><span class="st">b1b7 := b1*b7</span></span>
<span><span class="st">b2b8 := b2*b8</span></span>
<span><span class="st">totalind_eltern := b1*b7 + b2*b8</span></span>
<span><span class="st">b3b7 := b3*b7</span></span>
<span><span class="st">b4b8 := b4*b8</span></span>
<span><span class="st">totalind_freunde := b3*b7 + b4*b8</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Total effects</span></span>
<span><span class="st">total_eltern := b1*b7 + b2*b8 + b5</span></span>
<span><span class="st">total_freunde := b3*b7 + b4*b8 + b6</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sup_parents"</span>, <span class="st">"sup_friends"</span>, <span class="st">"se_acad"</span>, <span class="st">"se_social"</span>, <span class="st">"ls"</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">paste0</span>, <span class="st">"_p"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  SUP_Parents <span class="op">=</span> <span class="va">y</span><span class="op">$</span><span class="va">sup_parents</span>,</span>
<span>  SUP_Friends <span class="op">=</span> <span class="va">y</span><span class="op">$</span><span class="va">sup_friends</span>,</span>
<span>  SE_Academic <span class="op">=</span> <span class="va">y</span><span class="op">$</span><span class="va">se_acad</span>,</span>
<span>  SE_Social <span class="op">=</span> <span class="va">y</span><span class="op">$</span><span class="va">se_social</span>,</span>
<span>  LS <span class="op">=</span> <span class="va">y</span><span class="op">$</span><span class="va">ls</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"b"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SUP_Parents"</span>, <span class="st">"SUP_Friends"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  <span class="st">"SUP_Parents"</span>, <span class="st">"SUP_Friends"</span>, <span class="st">"SE_Academic"</span>, <span class="st">"SE_Social"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">b</span>, <span class="st">"*"</span>, <span class="va">d</span><span class="op">)</span></span>
<span></span>
<span><span class="va">reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  SE_Academic <span class="op">=</span> <span class="va">e</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  SE_Social <span class="op">=</span> <span class="va">e</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  LS <span class="op">=</span> <span class="va">e</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>SE_Academic <span class="op">=</span> <span class="st">"SE_Social"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  b1b7 <span class="op">=</span> <span class="st">"b1*b7"</span>,</span>
<span>  b2b8 <span class="op">=</span> <span class="st">"b2*b8"</span>,</span>
<span>  totalind_eltern <span class="op">=</span> <span class="st">"b1*b7 + b2*b8"</span>,</span>
<span>  b3b7 <span class="op">=</span> <span class="st">"b3*b7"</span>,</span>
<span>  b4b8 <span class="op">=</span> <span class="st">"b4*b8"</span>,</span>
<span>  totalind_freunde <span class="op">=</span> <span class="st">"b3*b7 + b4*b8"</span>,</span>
<span>  total_eltern <span class="op">=</span> <span class="st">"b1*b7 + b2*b8 + b5"</span>,</span>
<span>  total_freunde <span class="op">=</span> <span class="st">"b3*b7 + b4*b8 + b6"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span></span>
<span>  regression <span class="op">=</span> <span class="va">reg</span>, covariance <span class="op">=</span> <span class="va">cov</span>,</span>
<span>  indirect <span class="op">=</span> <span class="va">ind</span>, latent <span class="op">=</span> <span class="va">lat</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## SUP_Parents =~ sup_parents_p1 + sup_parents_p2 + sup_parents_p3</span></span>
<span><span class="co">## SUP_Friends =~ sup_friends_p1 + sup_friends_p2 + sup_friends_p3</span></span>
<span><span class="co">## SE_Academic =~ se_acad_p1 + se_acad_p2 + se_acad_p3</span></span>
<span><span class="co">## SE_Social =~ se_social_p1 + se_social_p2 + se_social_p3</span></span>
<span><span class="co">## LS =~ ls_p1 + ls_p2 + ls_p3</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## SE_Academic ~ b1*SUP_Parents + b3*SUP_Friends</span></span>
<span><span class="co">## SE_Social ~ b2*SUP_Parents + b4*SUP_Friends</span></span>
<span><span class="co">## LS ~ b5*SUP_Parents + b6*SUP_Friends + b7*SE_Academic + b8*SE_Social</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Covariances-----------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## SE_Academic ~~ SE_Social</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [--------Mediations (indirect effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## b1b7 := b1*b7</span></span>
<span><span class="co">## b2b8 := b2*b8</span></span>
<span><span class="co">## totalind_eltern := b1*b7 + b2*b8</span></span>
<span><span class="co">## b3b7 := b3*b7</span></span>
<span><span class="co">## b4b8 := b4*b8</span></span>
<span><span class="co">## totalind_freunde := b3*b7 + b4*b8</span></span>
<span><span class="co">## total_eltern := b1*b7 + b2*b8 + b5</span></span>
<span><span class="co">## total_freunde := b3*b7 + b4*b8 + b6</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-8-intercepts">Example 8 (intercepts)<a class="anchor" aria-label="anchor" href="#example-8-intercepts"></a>
</h2>
<p>Source: <a href="https://lavaan.ugent.be/tutorial/means.html" class="external-link uri">https://lavaan.ugent.be/tutorial/means.html</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HS.model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st"># three-factor model</span></span>
<span><span class="st">  visual  =~ x1 + x2 + x3</span></span>
<span><span class="st">  textual =~ x4 + x5 + x6</span></span>
<span><span class="st">  speed   =~ x7 + x8 + x9</span></span>
<span><span class="st"># intercepts with fixed values</span></span>
<span><span class="st">  x1 + x2 + x3 + x4 ~ 0.5*1</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cus</span> <span class="op">&lt;-</span> <span class="st">"x1 + x2 + x3 + x4 ~ 0.5*1"</span></span>
<span></span>
<span><span class="va">HS.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span></span>
<span>  latent <span class="op">=</span> <span class="va">lat</span>, custom <span class="op">=</span> <span class="va">cus</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">HS.model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## visual =~ x1 + x2 + x3</span></span>
<span><span class="co">## textual =~ x4 + x5 + x6</span></span>
<span><span class="co">## speed =~ x7 + x8 + x9</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------Custom Specifications-------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## x1 + x2 + x3 + x4 ~ 0.5*1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-9-thresholds">Example 9 (thresholds)<a class="anchor" aria-label="anchor" href="#example-9-thresholds"></a>
</h2>
<p>Source: <a href="https://tdjorgensen.github.io/TDJorgensen/CatMeasEq/Jorgensen.CatMeasEq.pdf" class="external-link uri">https://tdjorgensen.github.io/TDJorgensen/CatMeasEq/Jorgensen.CatMeasEq.pdf</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod2</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">## LIR means</span></span>
<span><span class="st">  y2w1 ~ mean1*1</span></span>
<span><span class="st">  y2w2 ~ mean2*1</span></span>
<span><span class="st">## LIR (co)variances</span></span>
<span><span class="st">  y2w1 ~~ var1*y2w1 + y2w2</span></span>
<span><span class="st">  y2w2 ~~ var2*y2w2</span></span>
<span><span class="st">## thresholds link LIRs to observed items</span></span>
<span><span class="st">  y2w1 | thr1*t1</span></span>
<span><span class="st">  y2w2 | thr2*t1</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  y2w1 <span class="op">=</span> <span class="st">"mean1*1"</span>,</span>
<span>  y2w2 <span class="op">=</span> <span class="st">"mean2*1"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  y2w1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"var1*y2w1"</span>, <span class="st">"y2w2"</span><span class="op">)</span>,</span>
<span>  y2w2 <span class="op">=</span> <span class="st">"var2*y2w2"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">thres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  y2w1 <span class="op">=</span> <span class="st">"thr1*t1"</span>,</span>
<span>  y2w2 <span class="op">=</span> <span class="st">"thr2*t1"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">HS.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span></span>
<span>  regression <span class="op">=</span> <span class="va">reg</span>,</span>
<span>  covariance <span class="op">=</span> <span class="va">cov</span>,</span>
<span>  threshold <span class="op">=</span> <span class="va">thres</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">HS.model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y2w1 ~ mean1*1</span></span>
<span><span class="co">## y2w2 ~ mean2*1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Covariances-----------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y2w1 ~~ var1*y2w1 + y2w2</span></span>
<span><span class="co">## y2w2 ~~ var2*y2w2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Thresholds------------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## y2w1 | thr1*t1</span></span>
<span><span class="co">## y2w2 | thr2*t1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="example-10-longitudinal-invariance">Example 10 (longitudinal invariance)<a class="anchor" aria-label="anchor" href="#example-10-longitudinal-invariance"></a>
</h2>
<p>Source: <a href="https://thechangelab.stanford.edu/tutorials/growth-modeling/modeling-change-latent-vars-ordinal-indicators-lavaan/" class="external-link uri">https://thechangelab.stanford.edu/tutorials/growth-modeling/modeling-change-latent-vars-ordinal-indicators-lavaan/</a></p>
<p><code>lavaan</code>:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">configural_invar</span> <span class="op">&lt;-</span> <span class="st">" #opening quote</span></span>
<span><span class="st">#factor loadings</span></span>
<span><span class="st">  eta1 =~ 1*t1_sc + #for identification</span></span>
<span><span class="st">          t1_intp +</span></span>
<span><span class="st">          t1_ext</span></span>
<span><span class="st">  eta2 =~ 1*t2_sc + #for identification</span></span>
<span><span class="st">          t2_intp +</span></span>
<span><span class="st">          t2_ext</span></span>
<span><span class="st">  eta3 =~ 1*t4_sc + #for identification</span></span>
<span><span class="st">          t4_intp +</span></span>
<span><span class="st">          t4_ext</span></span>
<span><span class="st"></span></span>
<span><span class="st">#latent variable variances</span></span>
<span><span class="st">   eta1~~eta1</span></span>
<span><span class="st">   eta2~~eta2</span></span>
<span><span class="st">   eta3~~eta3</span></span>
<span><span class="st"></span></span>
<span><span class="st">#latent variable covariances</span></span>
<span><span class="st">   eta1~~eta2</span></span>
<span><span class="st">   eta1~~eta3</span></span>
<span><span class="st">   eta2~~eta3</span></span>
<span><span class="st"></span></span>
<span><span class="st">#latent variable means</span></span>
<span><span class="st">   eta1~0*1 #for scaling</span></span>
<span><span class="st">   eta2~0*1 #for scaling</span></span>
<span><span class="st">   eta3~0*1 #for scaling</span></span>
<span><span class="st"></span></span>
<span><span class="st">#propensity variances</span></span>
<span><span class="st">   t1_sc  ~~ 1*t1_sc</span></span>
<span><span class="st">   t1_intp~~ 1*t1_intp</span></span>
<span><span class="st">   t1_ext ~~ 1*t1_ext</span></span>
<span><span class="st">   t2_sc  ~~ 1*t2_sc</span></span>
<span><span class="st">   t2_intp~~ 1*t2_intp</span></span>
<span><span class="st">   t2_ext ~~ 1*t2_ext</span></span>
<span><span class="st">   t4_sc  ~~ 1*t4_sc</span></span>
<span><span class="st">   t4_intp~~ 1*t4_intp</span></span>
<span><span class="st">   t4_ext ~~ 1*t4_ext</span></span>
<span><span class="st"></span></span>
<span><span class="st">#unique covariances</span></span>
<span><span class="st"></span></span>
<span><span class="st"></span></span>
<span><span class="st">#observed variable intercepts/thresholds (4 categories = 3 thresholds)</span></span>
<span><span class="st">   t1_sc   |t1 + t2 + t3</span></span>
<span><span class="st">   t1_intp |t1 + t2 + t3</span></span>
<span><span class="st">   t1_ext  |t1 + t2 + t3</span></span>
<span><span class="st">   t2_sc   |t1 + t2 + t3</span></span>
<span><span class="st">   t2_intp |t1 + t2 + t3</span></span>
<span><span class="st">   t2_ext  |t1 + t2 + t3</span></span>
<span><span class="st">   t4_sc   |t1 + t2 + t3</span></span>
<span><span class="st">   t4_intp |t1 + t2 + t3</span></span>
<span><span class="st">   t4_ext  |t1 + t2 + t3</span></span>
<span><span class="st">"</span> <span class="co"># closing quote</span></span></code></pre></div>
<p><code>lavaanExtra</code>:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"eta"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"t"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">term</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sc"</span>, <span class="st">"intp"</span>, <span class="st">"ext"</span><span class="op">)</span></span>
<span><span class="va">tnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">t</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, <span class="st">"_"</span>, <span class="va">term</span><span class="op">)</span></span>
<span><span class="va">tnames2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"1*"</span>, <span class="va">tnames</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  eta1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">tnames2</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">tnames</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  eta2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">tnames2</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>, <span class="va">tnames</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  eta3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">tnames2</span><span class="op">[</span><span class="fl">7</span><span class="op">]</span>, <span class="va">tnames</span><span class="op">[</span><span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">eta</span>, <span class="va">eta</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="va">eta</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, <span class="va">tnames2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cov</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">eta</span>, <span class="va">eta</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">eta</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, <span class="va">tnames</span><span class="op">)</span></span>
<span></span>
<span><span class="va">thres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">t</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, <span class="fl">9</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">thres</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">tnames</span></span>
<span></span>
<span><span class="va">reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"0*1"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="va">eta</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">HS.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span></span>
<span>  regression <span class="op">=</span> <span class="va">reg</span>,</span>
<span>  latent <span class="op">=</span> <span class="va">lat</span>,</span>
<span>  covariance <span class="op">=</span> <span class="va">cov</span>,</span>
<span>  threshold <span class="op">=</span> <span class="va">thres</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">HS.model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [-----Latent variables (measurement model)-----]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## eta1 =~ 1*t1_sc + t1_intp + t1_ext</span></span>
<span><span class="co">## eta2 =~ 1*t2_sc + t2_intp + t2_ext</span></span>
<span><span class="co">## eta3 =~ 1*t4_sc + t4_intp + t4_ext</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## eta1 ~ 0*1</span></span>
<span><span class="co">## eta2 ~ 0*1</span></span>
<span><span class="co">## eta3 ~ 0*1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Covariances-----------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## eta1 ~~ eta1</span></span>
<span><span class="co">## eta2 ~~ eta2</span></span>
<span><span class="co">## eta3 ~~ eta3</span></span>
<span><span class="co">## eta1 ~~ eta2</span></span>
<span><span class="co">## eta1 ~~ eta3</span></span>
<span><span class="co">## eta2 ~~ eta3</span></span>
<span><span class="co">## t1_sc ~~ 1*t1_sc</span></span>
<span><span class="co">## t1_intp ~~ 1*t1_intp</span></span>
<span><span class="co">## t1_ext ~~ 1*t1_ext</span></span>
<span><span class="co">## t2_sc ~~ 1*t2_sc</span></span>
<span><span class="co">## t2_intp ~~ 1*t2_intp</span></span>
<span><span class="co">## t2_ext ~~ 1*t2_ext</span></span>
<span><span class="co">## t4_sc ~~ 1*t4_sc</span></span>
<span><span class="co">## t4_intp ~~ 1*t4_intp</span></span>
<span><span class="co">## t4_ext ~~ 1*t4_ext</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ##################################################</span></span>
<span><span class="co">## # [------------------Thresholds------------------]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## t1_sc | t1 + t2 + t3</span></span>
<span><span class="co">## t1_intp | t1 + t2 + t3</span></span>
<span><span class="co">## t1_ext | t1 + t2 + t3</span></span>
<span><span class="co">## t2_sc | t1 + t2 + t3</span></span>
<span><span class="co">## t2_intp | t1 + t2 + t3</span></span>
<span><span class="co">## t2_ext | t1 + t2 + t3</span></span>
<span><span class="co">## t4_sc | t1 + t2 + t3</span></span>
<span><span class="co">## t4_intp | t1 + t2 + t3</span></span>
<span><span class="co">## t4_ext | t1 + t2 + t3</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://remi-theriault.com" class="external-link">Rémi Thériault</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
