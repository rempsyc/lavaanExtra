<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Affords an alternative, vector-based syntax to lavaan, as well as other 
             convenience functions such as naming paths and defining indirect
             links automatically, in addition to convenience formatting optimized
             for a publication and script sharing workflow.">
<title>Convenience Functions for Package `lavaan` • lavaanExtra</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Convenience Functions for Package `lavaan`">
<meta property="og:description" content="Affords an alternative, vector-based syntax to lavaan, as well as other 
             convenience functions such as naming paths and defining indirect
             links automatically, in addition to convenience formatting optimized
             for a publication and script sharing workflow.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-274QZTFL23"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-274QZTFL23');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">lavaanExtra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="TODOS.html">To-dos</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://remi-theriault.com" aria-label="Author">Author</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/rempsyc" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rempsyc/rempsyc/" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sponsors/rempsyc" aria-label="Donate">
    <span class="fa fa-coffee"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="lavaanextra-convenience-functions-for-lavaan">lavaanExtra: Convenience functions for <code>lavaan</code>
<a class="anchor" aria-label="anchor" href="#lavaanextra-convenience-functions-for-lavaan"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p>Affords an alternative, vector-based syntax to <code>lavaan</code>, as well as other convenience functions such as naming paths and defining indirect links automatically. Also offers convenience formatting optimized for a publication and script sharing workflow.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>lavaanExtra</code> like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"lavaanExtra"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  rempsyc <span class="op">=</span> <span class="st">"https://rempsyc.r-universe.dev"</span>,</span>
<span>  CRAN <span class="op">=</span> <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="why-use-lavaanextra">Why use <code>lavaanExtra</code>?<a class="anchor" aria-label="anchor" href="#why-use-lavaanextra"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Reusable code</strong>. Don’t repeat yourself anymore when you only want to change a few things when comparing and fitting models.</li>
<li>
<strong>Shorter code</strong>. Because of point 1, you can have shorter code, since you write it once and simply reuse it. For items with similar patterns, you can also use <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code> with appropriate item numbers instead of typing each one every time.</li>
<li>
<strong>Less error-prone code</strong>. Because of point 1, you can have less risk of human errors since you don’t have possibly multiple different version of the same thing (which makes it easier to correct too).</li>
<li>
<strong>Better control over your code</strong>. Because of point 1, you are in control of the whole flow. You change it once, and it will change it everywhere else in the script, without having to change it manually for each model.</li>
<li>
<strong>More readable code</strong>. Because of point 1, other people (but also yourself) only have to process the information the first time to make sure it’s been specified correctly, and not every time you check the new models.</li>
<li>
<strong>Prettier code</strong>. Because it will format the model for you in a pretty way, every time. You don’t have to worry about manually making your model good-looking and readable anymore.</li>
<li>
<strong>More accessible code</strong>. You don’t have to remember the exact syntax (although it is recommended) for it to work. It uses intuitive variable names that most people can understand. This benefit is most apparent for beginners, but it also saves precious typing time for veterans.</li>
</ol>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><a href="#regression-example">Regression example</a><a name="Regression%20example"></a></p>
<p><a href="#cfa-example">CFA example</a><a name="CFA%20example"></a></p>
<p><a href="#sem-example">SEM example</a><a name="SEM%20example"></a></p>
<p><a href="#saturated-model">Saturated model</a><a name="Saturated%20model"></a></p>
<p><a href="#path-analysis-model">Path analysis model</a><a name="Path%20analysis%20model"></a></p>
<p><a href="#latent-model">Latent model</a><a name="Latent%20model"></a></p>
</div>
<div class="section level2">
<h2 id="regression-example">Regression example<a class="anchor" aria-label="anchor" href="#regression-example"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define our regression terms</span></span>
<span><span class="op">(</span><span class="va">regression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,</span>
<span>                    disp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $mpg</span></span>
<span><span class="co">#&gt; [1] "cyl"  "disp" "hp"   "drat"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $disp</span></span>
<span><span class="co">#&gt; [1] "hp"   "drat" "wt"   "qsec"</span></span>
<span></span>
<span><span class="co"># Load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaanExtra.remi-theriault.com">lavaanExtra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Suggested citation: Thériault, R. (2022). lavaanExtra: Convenience functions for lavaan (R package version 0.0.0.9) [Computer software]. https://lavaanExtra.remi-theriault.com/</span></span>
<span></span>
<span><span class="co"># Write the model, and check it</span></span>
<span><span class="va">mtcars.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>regression <span class="op">=</span> <span class="va">regression</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">mtcars.model</span><span class="op">)</span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; mpg ~ cyl + disp + hp + drat</span></span>
<span><span class="co">#&gt; disp ~ hp + drat + wt + qsec</span></span>
<span></span>
<span><span class="co"># Fit the model with `lavaan`</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="va">fit.reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html" class="external-link">lavaan</a></span><span class="op">(</span><span class="va">mtcars.model</span>, data <span class="op">=</span> <span class="va">mtcars</span>, auto.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get regression parameters only</span></span>
<span><span class="fu"><a href="reference/lavaan_reg.html">lavaan_reg</a></span><span class="op">(</span><span class="va">fit.reg</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Outcome Predictor      B     p</span></span>
<span><span class="co">#&gt; 1     mpg       cyl -0.242 0.244</span></span>
<span><span class="co">#&gt; 2     mpg      disp -0.287 0.123</span></span>
<span><span class="co">#&gt; 3     mpg        hp -0.264 0.128</span></span>
<span><span class="co">#&gt; 4     mpg      drat  0.192 0.159</span></span>
<span><span class="co">#&gt; 5    disp        hp  0.175 0.177</span></span>
<span><span class="co">#&gt; 6    disp      drat -0.177 0.034</span></span>
<span><span class="co">#&gt; 7    disp        wt  0.614 0.000</span></span>
<span><span class="co">#&gt; 8    disp      qsec -0.186 0.061</span></span>
<span></span>
<span><span class="co"># We can get it prettier with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/lavaan_reg.html">lavaan_reg</a></span><span class="op">(</span><span class="va">fit.reg</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span>, highlight <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-reg-1.png" width="30%"></p>
</div>
<div class="section level2">
<h2 id="cfa-example">CFA example<a class="anchor" aria-label="anchor" href="#cfa-example"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define latent variables</span></span>
<span><span class="op">(</span><span class="va">latent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>                textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>                speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $visual</span></span>
<span><span class="co">#&gt; [1] "x1" "x2" "x3"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $textual</span></span>
<span><span class="co">#&gt; [1] "x4" "x5" "x6"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $speed</span></span>
<span><span class="co">#&gt; [1] "x7" "x8" "x9"</span></span>
<span></span>
<span><span class="co"># Write the model, and check it</span></span>
<span><span class="va">cfa.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span>latent <span class="op">=</span> <span class="va">latent</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">cfa.model</span><span class="op">)</span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [---------------Latent variables---------------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; visual =~ x1 + x2 + x3</span></span>
<span><span class="co">#&gt; textual =~ x4 + x5 + x6</span></span>
<span><span class="co">#&gt; speed =~ x7 + x8 + x9</span></span>
<span></span>
<span><span class="co"># Fit the model with `lavaan`</span></span>
<span><span class="va">fit.cfa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">cfa.model</span>, data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the summary output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit.cfa</span>, fit.measures <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; lavaan 0.6-12 ended normally after 35 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Estimator                                         ML</span></span>
<span><span class="co">#&gt;   Optimization method                           NLMINB</span></span>
<span><span class="co">#&gt;   Number of model parameters                        21</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Number of observations                           301</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test User Model:</span></span>
<span><span class="co">#&gt;                                                       </span></span>
<span><span class="co">#&gt;   Test statistic                                85.306</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                24</span></span>
<span><span class="co">#&gt;   P-value (Chi-square)                           0.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test Baseline Model:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Test statistic                               918.852</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                36</span></span>
<span><span class="co">#&gt;   P-value                                        0.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; User Model versus Baseline Model:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Comparative Fit Index (CFI)                    0.931</span></span>
<span><span class="co">#&gt;   Tucker-Lewis Index (TLI)                       0.896</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Loglikelihood and Information Criteria:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Loglikelihood user model (H0)              -3737.745</span></span>
<span><span class="co">#&gt;   Loglikelihood unrestricted model (H1)      -3695.092</span></span>
<span><span class="co">#&gt;                                                       </span></span>
<span><span class="co">#&gt;   Akaike (AIC)                                7517.490</span></span>
<span><span class="co">#&gt;   Bayesian (BIC)                              7595.339</span></span>
<span><span class="co">#&gt;   Sample-size adjusted Bayesian (BIC)         7528.739</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Root Mean Square Error of Approximation:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   RMSEA                                          0.092</span></span>
<span><span class="co">#&gt;   90 Percent confidence interval - lower         0.071</span></span>
<span><span class="co">#&gt;   90 Percent confidence interval - upper         0.114</span></span>
<span><span class="co">#&gt;   P-value RMSEA &lt;= 0.05                          0.001</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Standardized Root Mean Square Residual:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   SRMR                                           0.065</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Estimates:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Standard errors                             Standard</span></span>
<span><span class="co">#&gt;   Information                                 Expected</span></span>
<span><span class="co">#&gt;   Information saturated (h1) model          Structured</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Latent Variables:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;   visual =~                                           </span></span>
<span><span class="co">#&gt;     x1                1.000                           </span></span>
<span><span class="co">#&gt;     x2                0.554    0.100    5.554    0.000</span></span>
<span><span class="co">#&gt;     x3                0.729    0.109    6.685    0.000</span></span>
<span><span class="co">#&gt;   textual =~                                          </span></span>
<span><span class="co">#&gt;     x4                1.000                           </span></span>
<span><span class="co">#&gt;     x5                1.113    0.065   17.014    0.000</span></span>
<span><span class="co">#&gt;     x6                0.926    0.055   16.703    0.000</span></span>
<span><span class="co">#&gt;   speed =~                                            </span></span>
<span><span class="co">#&gt;     x7                1.000                           </span></span>
<span><span class="co">#&gt;     x8                1.180    0.165    7.152    0.000</span></span>
<span><span class="co">#&gt;     x9                1.082    0.151    7.155    0.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Covariances:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;   visual ~~                                           </span></span>
<span><span class="co">#&gt;     textual           0.408    0.074    5.552    0.000</span></span>
<span><span class="co">#&gt;     speed             0.262    0.056    4.660    0.000</span></span>
<span><span class="co">#&gt;   textual ~~                                          </span></span>
<span><span class="co">#&gt;     speed             0.173    0.049    3.518    0.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variances:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;    .x1                0.549    0.114    4.833    0.000</span></span>
<span><span class="co">#&gt;    .x2                1.134    0.102   11.146    0.000</span></span>
<span><span class="co">#&gt;    .x3                0.844    0.091    9.317    0.000</span></span>
<span><span class="co">#&gt;    .x4                0.371    0.048    7.779    0.000</span></span>
<span><span class="co">#&gt;    .x5                0.446    0.058    7.642    0.000</span></span>
<span><span class="co">#&gt;    .x6                0.356    0.043    8.277    0.000</span></span>
<span><span class="co">#&gt;    .x7                0.799    0.081    9.823    0.000</span></span>
<span><span class="co">#&gt;    .x8                0.488    0.074    6.573    0.000</span></span>
<span><span class="co">#&gt;    .x9                0.566    0.071    8.003    0.000</span></span>
<span><span class="co">#&gt;     visual            0.809    0.145    5.564    0.000</span></span>
<span><span class="co">#&gt;     textual           0.979    0.112    8.737    0.000</span></span>
<span><span class="co">#&gt;     speed             0.384    0.086    4.451    0.000</span></span>
<span></span>
<span><span class="co"># Get fit indices</span></span>
<span><span class="fu"><a href="reference/nice_fit.html">nice_fit</a></span><span class="op">(</span><span class="va">fit.cfa</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Model   chi2 df chi2.df p   CFI   TLI RMSEA  SRMR     AIC      BIC</span></span>
<span><span class="co">#&gt; 1 fit.cfa 85.306 24   3.554 0 0.931 0.896 0.092 0.065 7517.49 7595.339</span></span>
<span></span>
<span><span class="co"># We can get it prettier with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/nice_fit.html">nice_fit</a></span><span class="op">(</span><span class="va">fit.cfa</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-cfa-1.png" width="90%"></p>
</div>
<div class="section level2">
<h2 id="sem-example">SEM example<a class="anchor" aria-label="anchor" href="#sem-example"></a>
</h2>
<p>Here is a structural equation model example. We start with a path analysis first.</p>
<div class="section level3">
<h3 id="saturated-model">Saturated model<a class="anchor" aria-label="anchor" href="#saturated-model"></a>
</h3>
<p>The first step is usually to look at the saturated <code>lavaan</code> model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate scale averages</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">HolzingerSwineford1939</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">visual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">textual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">speed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check what we have</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id sex ageyr agemo  school grade       x1   x2    x3       x4   x5        x6</span></span>
<span><span class="co">#&gt; 1  1   1    13     1 Pasteur     7 3.333333 7.75 0.375 2.333333 5.75 1.2857143</span></span>
<span><span class="co">#&gt; 2  2   2    13     7 Pasteur     7 5.333333 5.25 2.125 1.666667 3.00 1.2857143</span></span>
<span><span class="co">#&gt; 3  3   2    13     1 Pasteur     7 4.500000 5.25 1.875 1.000000 1.75 0.4285714</span></span>
<span><span class="co">#&gt; 4  4   1    13     2 Pasteur     7 5.333333 7.75 3.000 2.666667 4.50 2.4285714</span></span>
<span><span class="co">#&gt; 5  5   2    12     2 Pasteur     7 4.833333 4.75 0.875 2.666667 4.00 2.5714286</span></span>
<span><span class="co">#&gt; 6  6   2    14     1 Pasteur     7 5.333333 5.00 2.250 1.000000 3.00 0.8571429</span></span>
<span><span class="co">#&gt;         x7   x8       x9   visual  textual    speed</span></span>
<span><span class="co">#&gt; 1 3.391304 5.75 6.361111 3.819444 3.123016 5.167472</span></span>
<span><span class="co">#&gt; 2 3.782609 6.25 7.916667 4.236111 1.984127 5.983092</span></span>
<span><span class="co">#&gt; 3 3.260870 3.90 4.416667 3.875000 1.059524 3.859179</span></span>
<span><span class="co">#&gt; 4 3.000000 5.30 4.861111 5.361111 3.198413 4.387037</span></span>
<span><span class="co">#&gt; 5 3.695652 6.30 5.916667 3.486111 3.079365 5.304106</span></span>
<span><span class="co">#&gt; 6 4.347826 6.65 7.500000 4.194444 1.619048 6.165942</span></span>
<span></span>
<span><span class="co"># Define our variables</span></span>
<span><span class="op">(</span><span class="va">m</span> <span class="op">&lt;-</span> <span class="st">"visual"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "visual"</span></span>
<span><span class="op">(</span><span class="va">IV</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ageyr"</span>, <span class="st">"grade"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ageyr" "grade"</span></span>
<span><span class="co">#(DV &lt;- c("speed", "textual"))</span></span>
<span></span>
<span><span class="co"># Define our lavaan lists</span></span>
<span><span class="op">(</span><span class="va">mediation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="va">m</span>,</span>
<span>                   textual <span class="op">=</span> <span class="va">m</span>,</span>
<span>                   visual <span class="op">=</span> <span class="va">IV</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $speed</span></span>
<span><span class="co">#&gt; [1] "visual"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $textual</span></span>
<span><span class="co">#&gt; [1] "visual"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $visual</span></span>
<span><span class="co">#&gt; [1] "ageyr" "grade"</span></span>
<span><span class="op">(</span><span class="va">regression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="va">IV</span>,</span>
<span>                    textual <span class="op">=</span> <span class="va">IV</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $speed</span></span>
<span><span class="co">#&gt; [1] "ageyr" "grade"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $textual</span></span>
<span><span class="co">#&gt; [1] "ageyr" "grade"</span></span>
<span><span class="op">(</span><span class="va">covariance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="st">"textual"</span>,</span>
<span>                    ageyr <span class="op">=</span> <span class="st">"grade"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $speed</span></span>
<span><span class="co">#&gt; [1] "textual"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ageyr</span></span>
<span><span class="co">#&gt; [1] "grade"</span></span>
<span></span>
<span><span class="co"># Write the model, and check it</span></span>
<span><span class="va">fit.saturated</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span><span class="va">mediation</span>, <span class="va">regression</span>, <span class="va">covariance</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">fit.saturated</span><span class="op">)</span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [-----------Mediations (named paths)-----------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ visual</span></span>
<span><span class="co">#&gt; textual ~ visual</span></span>
<span><span class="co">#&gt; visual ~ ageyr + grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ ageyr + grade</span></span>
<span><span class="co">#&gt; textual ~ ageyr + grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [------------------Covariances-----------------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~~ textual</span></span>
<span><span class="co">#&gt; ageyr ~~ grade</span></span>
<span></span>
<span><span class="co"># Fit the model with `lavaan`</span></span>
<span><span class="va">fit.saturated</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html" class="external-link">lavaan</a></span><span class="op">(</span><span class="va">fit.saturated</span>, data <span class="op">=</span> <span class="va">data</span>, auto.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get regression parameters only and make it pretty with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/lavaan_reg.html">lavaan_reg</a></span><span class="op">(</span><span class="va">fit.saturated</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span>, highlight <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-saturated-1.png" width="30%"></p>
<p>So <code>speed</code> as predicted by <code>ageyr</code> isn’t significant. We could remove that path from the model it if we are trying to make a more parsimonious model. Let’s make the non-saturated path analysis model next.</p>
</div>
<div class="section level3">
<h3 id="path-analysis-model">Path analysis model<a class="anchor" aria-label="anchor" href="#path-analysis-model"></a>
</h3>
<p>Because we use <code>lavaanExtra</code>, we don’t have to redefine the entire model: simply what we want to update. In this case, the regressions. However, we also want to specify and test our indirect effects (mediation). For this, we have to obtain the path names by setting <code>label = TRUE</code>. This will allow us to define our indirect effects and feed them back to <code>write_lavaan</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">regression</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="st">"grade"</span>,</span>
<span>                    textual <span class="op">=</span> <span class="va">IV</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $speed</span></span>
<span><span class="co">#&gt; [1] "grade"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $textual</span></span>
<span><span class="co">#&gt; [1] "ageyr" "grade"</span></span>
<span><span class="co"># We check that we have removed "ageyr" correctly from "speed". OK.</span></span>
<span></span>
<span><span class="co"># We can run the model again. However, we set `label = TRUE` to get the path names</span></span>
<span><span class="va">model.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span><span class="va">mediation</span>, <span class="va">regression</span>, <span class="va">covariance</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model.path</span><span class="op">)</span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [-----------Mediations (named paths)-----------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ speed_a*visual</span></span>
<span><span class="co">#&gt; textual ~ textual_a*visual</span></span>
<span><span class="co">#&gt; visual ~ visual_a*ageyr + visual_b*grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ grade</span></span>
<span><span class="co">#&gt; textual ~ ageyr + grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [------------------Covariances-----------------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~~ textual</span></span>
<span><span class="co">#&gt; ageyr ~~ grade</span></span>
<span><span class="co"># We check that we have removed "ageyr" correctly from "speed" in the </span></span>
<span><span class="co"># regression section. OK.</span></span></code></pre></div>
<p>Here, if we check the mediation section of the model, we see that it has been “augmented” with the path names. Those are <code>speed_a</code>, <code>textual_a</code>, <code>visual_a</code>, and <code>visual_b</code>. The logic for the determination of the path names is predictable: it is always the dependent variable (on the left) followed by letters, which represent the number of the explanatory variable (on the right).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">indirect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>age_visual_speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"speed_a"</span>, <span class="st">"visual_a"</span><span class="op">)</span>,</span>
<span>                  grade_visual_textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"textual_a"</span>, <span class="st">"visual_b"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $age_visual_speed</span></span>
<span><span class="co">#&gt; [1] "speed_a"  "visual_a"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $grade_visual_textual</span></span>
<span><span class="co">#&gt; [1] "textual_a" "visual_b"</span></span>
<span></span>
<span><span class="co"># We run the model again, with the indirect effects</span></span>
<span><span class="va">model.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span><span class="va">mediation</span>, <span class="va">regression</span>, <span class="va">covariance</span>, <span class="va">indirect</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model.path</span><span class="op">)</span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [-----------Mediations (named paths)-----------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ speed_a*visual</span></span>
<span><span class="co">#&gt; textual ~ textual_a*visual</span></span>
<span><span class="co">#&gt; visual ~ visual_a*ageyr + visual_b*grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ grade</span></span>
<span><span class="co">#&gt; textual ~ ageyr + grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [------------------Covariances-----------------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~~ textual</span></span>
<span><span class="co">#&gt; ageyr ~~ grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [--------Mediations (indirect effects)---------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; age_visual_speed := speed_a * visual_a</span></span>
<span><span class="co">#&gt; grade_visual_textual := textual_a * visual_b</span></span>
<span></span>
<span><span class="co"># Fit the model with `lavaan`</span></span>
<span><span class="va">fit.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html" class="external-link">lavaan</a></span><span class="op">(</span><span class="va">model.path</span>, data <span class="op">=</span> <span class="va">data</span>, auto.var <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get regression parameters only and make it pretty with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/lavaan_reg.html">lavaan_reg</a></span><span class="op">(</span><span class="va">fit.path</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span>, highlight <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-indirect1-1.png" width="30%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># We only kept significant regressions—good (for this demo).</span></span>
<span></span>
<span><span class="co"># Get covariance indices</span></span>
<span><span class="fu"><a href="reference/lavaan_cov.html">lavaan_cov</a></span><span class="op">(</span><span class="va">fit.path</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Variable.1 Variable.2     r     p</span></span>
<span><span class="co">#&gt; 8       speed    textual 0.131 0.024</span></span>
<span><span class="co">#&gt; 9       ageyr      grade 0.511 0.000</span></span>
<span><span class="co">#&gt; 10      speed      speed 0.824 0.000</span></span>
<span><span class="co">#&gt; 11    textual    textual 0.765 0.000</span></span>
<span><span class="co">#&gt; 12     visual     visual 0.942 0.000</span></span>
<span><span class="co">#&gt; 13      ageyr      ageyr 1.000 0.000</span></span>
<span><span class="co">#&gt; 14      grade      grade 1.000 0.000</span></span>
<span></span>
<span><span class="co"># We can get it prettier with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/lavaan_cov.html">lavaan_cov</a></span><span class="op">(</span><span class="va">fit.path</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-covariance-1.png" width="30%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get fit indices</span></span>
<span><span class="fu"><a href="reference/nice_fit.html">nice_fit</a></span><span class="op">(</span><span class="va">fit.cfa</span>, <span class="va">fit.saturated</span>, <span class="va">fit.path</span><span class="op">)</span></span>
<span><span class="co">#&gt;           Model   chi2 df chi2.df     p   CFI   TLI RMSEA  SRMR      AIC</span></span>
<span><span class="co">#&gt; 1       fit.cfa 85.306 24   3.554 0.000 0.931 0.896 0.092 0.065 7517.490</span></span>
<span><span class="co">#&gt; 2 fit.saturated  0.000  0     NaN    NA 1.000 1.000 0.000 0.000 3483.460</span></span>
<span><span class="co">#&gt; 3      fit.path  0.327  1   0.327 0.568 1.000 1.028 0.000 0.007 3481.787</span></span>
<span><span class="co">#&gt;        BIC</span></span>
<span><span class="co">#&gt; 1 7595.339</span></span>
<span><span class="co">#&gt; 2 3539.017</span></span>
<span><span class="co">#&gt; 3 3533.640</span></span>
<span></span>
<span><span class="co"># We can get it prettier with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/nice_fit.html">nice_fit</a></span><span class="op">(</span><span class="va">fit.cfa</span>, <span class="va">fit.saturated</span>, <span class="va">fit.path</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-path2-1.png" width="90%"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's get the indirect effects only</span></span>
<span><span class="fu"><a href="reference/lavaan_ind.html">lavaan_ind</a></span><span class="op">(</span><span class="va">fit.path</span><span class="op">)</span></span>
<span><span class="co">#&gt;         Indirect.Effect              Paths      B     p</span></span>
<span><span class="co">#&gt; 15     age_visual_speed   speed_a*visual_a -0.033 0.037</span></span>
<span><span class="co">#&gt; 16 grade_visual_textual textual_a*visual_b  0.066 0.002</span></span>
<span></span>
<span><span class="co"># We can get it prettier with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/lavaan_ind.html">lavaan_ind</a></span><span class="op">(</span><span class="va">fit.path</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-indirect2-1.png" width="50%"></p>
<p>For reference, this is our model, visually speaking</p>
<p><img src="reference/figures/holzinger_model.png"></p>
</div>
<div class="section level3">
<h3 id="latent-model">Latent model<a class="anchor" aria-label="anchor" href="#latent-model"></a>
</h3>
<p>Finally, perhaps we change our mind and decide to run a full SEM instead, with latent variables. Fear not: we don’t have to redo everything again. We can simply define our latent variables and proceed. In this example, we have <em>already</em> defined our latent variable for our CFA earlier, so we don’t even need to write that again!</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model.latent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/write_lavaan.html">write_lavaan</a></span><span class="op">(</span><span class="va">mediation</span>, <span class="va">regression</span>, <span class="va">covariance</span>, </span>
<span>                             <span class="va">indirect</span>, <span class="va">latent</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">model.latent</span><span class="op">)</span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [---------------Latent variables---------------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; visual =~ x1 + x2 + x3</span></span>
<span><span class="co">#&gt; textual =~ x4 + x5 + x6</span></span>
<span><span class="co">#&gt; speed =~ x7 + x8 + x9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [-----------Mediations (named paths)-----------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ speed_a*visual</span></span>
<span><span class="co">#&gt; textual ~ textual_a*visual</span></span>
<span><span class="co">#&gt; visual ~ visual_a*ageyr + visual_b*grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [---------Regressions (Direct effects)---------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~ grade</span></span>
<span><span class="co">#&gt; textual ~ ageyr + grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [------------------Covariances-----------------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; speed ~~ textual</span></span>
<span><span class="co">#&gt; ageyr ~~ grade</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ##################################################</span></span>
<span><span class="co">#&gt; # [--------Mediations (indirect effects)---------]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; age_visual_speed := speed_a * visual_a</span></span>
<span><span class="co">#&gt; grade_visual_textual := textual_a * visual_b</span></span>
<span></span>
<span><span class="co"># Run model</span></span>
<span><span class="va">fit.latent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html" class="external-link">lavaan</a></span><span class="op">(</span><span class="va">model.latent</span>, data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span>, auto.var <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>              auto.fix.first <span class="op">=</span> <span class="cn">TRUE</span>, auto.cov.lv.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get fit indices</span></span>
<span><span class="fu"><a href="reference/nice_fit.html">nice_fit</a></span><span class="op">(</span><span class="va">fit.cfa</span>, <span class="va">fit.saturated</span>, <span class="va">fit.path</span>, <span class="va">fit.latent</span><span class="op">)</span></span>
<span><span class="co">#&gt;           Model    chi2 df chi2.df     p   CFI   TLI RMSEA  SRMR      AIC</span></span>
<span><span class="co">#&gt; 1       fit.cfa  85.306 24   3.554 0.000 0.931 0.896 0.092 0.065 7517.490</span></span>
<span><span class="co">#&gt; 2 fit.saturated   0.000  0     NaN    NA 1.000 1.000 0.000 0.000 3483.460</span></span>
<span><span class="co">#&gt; 3      fit.path   0.327  1   0.327 0.568 1.000 1.028 0.000 0.007 3481.787</span></span>
<span><span class="co">#&gt; 4    fit.latent 118.917 37   3.214 0.000 0.924 0.888 0.086 0.061 8638.789</span></span>
<span><span class="co">#&gt;        BIC</span></span>
<span><span class="co">#&gt; 1 7595.339</span></span>
<span><span class="co">#&gt; 2 3539.017</span></span>
<span><span class="co">#&gt; 3 3533.640</span></span>
<span><span class="co">#&gt; 4 8746.198</span></span>
<span></span>
<span><span class="co"># We can get it prettier with the `rempsyc::nice_table` integration</span></span>
<span><span class="fu"><a href="reference/nice_fit.html">nice_fit</a></span><span class="op">(</span><span class="va">fit.cfa</span>, <span class="va">fit.saturated</span>, <span class="va">fit.path</span>, <span class="va">fit.latent</span>, nice_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-latent-1.png" width="90%"></p>
</div>
</div>
<div class="section level2">
<h2 id="support-me-and-this-package">Support me and this package<a class="anchor" aria-label="anchor" href="#support-me-and-this-package"></a>
</h2>
<p>Thank you for your support. You can support me and this package here: <a href="https://github.com/sponsors/rempsyc" class="external-link uri">https://github.com/sponsors/rempsyc</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rempsyc/lavaanExtra/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/rempsyc/lavaanExtra/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing lavaanExtra</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://remi-theriault.com" class="external-link">Rémi Thériault</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-4315-6788" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rempsyc/lavaanExtra/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/rempsyc/lavaanExtra/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://rempsyc.r-universe.dev/ui#package:lavaanExtra" class="external-link"><img src="https://rempsyc.r-universe.dev/badges/lavaanExtra" alt="r-universe"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/rempsyc/lavaanExtra/commits/main" class="external-link"><img src="https://img.shields.io/github/last-commit/rempsyc/lavaanExtra" alt="Last-commit"></a></li>
<li><a href="https://github.com/sponsors/rempsyc" class="external-link"><img src="https://img.shields.io/github/sponsors/rempsyc" alt="sponsors"></a></li>
<li><a href="https://github.com/rempsyc?tab=followers" class="external-link"><img src="https://img.shields.io/github/followers/rempsyc?style=social" alt="followers"></a></li>
<li><a href="https://github.com/rempsyc/lavaanExtra/network/members" class="external-link"><img src="https://img.shields.io/github/forks/rempsyc/lavaanExtra?style=social" alt="forks"></a></li>
<li><a href="https://github.com/rempsyc/lavaanExtra/stargazers" class="external-link"><img src="https://img.shields.io/github/stars/rempsyc/lavaanExtra?style=social" alt="stars"></a></li>
</ul>
</div>

<div class="table-of-contents">
<h2 data-toc-skip>Table of contents</h2>
<ul class="list-unstyled">
<li><nav id="toc"></nav></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://remi-theriault.com" class="external-link">Rémi Thériault</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
